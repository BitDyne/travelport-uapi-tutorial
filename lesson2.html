<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Basic Air Travel Requests</title>
  <meta name="GENERATOR" content="Blackfriday Markdown Processor v1.1" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" type="text/css" href="css/base.css" />
</head>
<body>

<h1>Basic Air Travel Requests</h1>

<h2>Unit 1, Lesson 2</h2>

<h3>Objective Of Lesson 2</h3>

<p>After this lesson is completed you should know how to search for available flights and price itineraries using the Travelport Universal API.</p>

<h3>Workflow</h3>

<p>This lesson, building on the <a href="index.html">previous one</a>, will allow you to do what most travel agents did in the past and what many still do today.  Their objective is to sell a trip to a customer, but to do that they need to do two basic tasks:</p>

<ul>
<li><p>Find a set of available flights that get the traveller from origin to destination (and often back)</p></li>

<li><p>Given the set of flights, determine the price of that itinerary.</p></li>
</ul>

<p>Given the terminology, we explained in <a href="index.html">lesson 1</a>, there are two ports that are needed to accomplish this workflow, unsurprisingly called the &ldquo;Availabilty Search&rdquo; port and the &ldquo;Price&rdquo; port.  Both of these can be accessed from the <code>AirService</code> object.</p>

<h3>Generating The Client</h3>

<p>As with the <code>Service.wsdl</code> in the previous lesson, we will need to generate the Java code to access uAPI services, this time from <code>Air.wsdl</code> in the directory <code>wsdl/air_v18_0</code>.  After you have generated the code, you will have many more packages in your project (hitting &ldquo;refresh&rdquo; or &ldquo;F5&rdquo; on your src folder is probably a good idea).  The <a href="https://github.com/iansmith/travelport-uapi-tutorial/blob/master/src/com/travelport/service/air_v18_0/AirService.java">AirService</a> object itself is part of the package <a href="(https://github.com/iansmith/travelport-uapi-tutorial/blob/master/src/com/travelport/service/air_v18_0/">com.travelport.service.air_v18_0</a>.</p>

<h3>Why All The Packages And Code?</h3>

<p>The reason for all the generated code&ndash;tens of thousands of lines of it&ndash;resulting running &ldquo;generate client&rdquo; on <code>Air.wsdl</code> is that the WSDL files may reference other WSDL files as well as schema files (in XSD files).  The <code>Air.wsdl</code> is the top of a large pyramid of different objects and since all are referenced in a chain that starts from <code>Air.wsdl</code> the CXF framework is obligated to generate code for them. CXF must generate Java code for all <em>reachable</em> types starting at <code>Air.wsdl</code> and this includes classes describing the amenities available in a particular hotel and the details of fares for rail journeys.</p>

<h3>Goal</h3>

<p>The class <a href="https://github.com/iansmith/travelport-uapi-tutorial/blob/master/src/com/travelport/uapi/unit1/Lesson2.java">Lesson2</a> can output itineraries for a given city pair, in this case Paris to Chattanooga Tennessee, USA, in a form like this:</p>

<pre><code>Price:GBP941.70 [BasePrice EUR760.00, Taxes GBP315.70]
AF#682 from CDG to ATL at 2012-06-22T10:55:00.000+02:00
AF#8468 from ATL to CHA at 2012-06-22T16:05:00.000-04:00
DL#5023 from CHA to ATL at 2012-06-29T16:06:00.000-04:00
DL#8517 from ATL to CDG at 2012-06-29T17:55:00.000-04:00
-----------
Price:GBP3594.70 [BasePrice EUR3998.00, Taxes GBP301.70]
UA#2331 from CDG to CLT at 2012-06-22T11:10:00.000+02:00
US#3568 from CLT to CHA at 2012-06-22T16:25:00.000-04:00
DL#5023 from CHA to ATL at 2012-06-29T16:06:00.000-04:00
DL#8517 from ATL to CDG at 2012-06-29T17:55:00.000-04:00
</code></pre>

<p>Itineraries are separated by the dashed lines.  This output, one must admit, is a bit terse and quite specific to the airline industry.  The first itinerary is about 940 Great British Pounds (GBP) and involves two Air France (AF) flights on June 22nd and two Delta (DL) flights on the return on June 29th.  The next itinerary is (shocking!) about four times as expensive, 3594.70 GBP, and involves three carriers this time, UA (United Airlines), US (US Airways), and again Delta on the return.  Note that this outbound air journey has a connection in Charlotte, North Carolina, USA instead of Atlanta, Georgia.</p>

<p>When run, the code <code>Lesson2</code> will produce a number of these itineraries&ndash;typically about 20.  There will be a pause at the time the program starts while it waits for the proposed, available itineraries to be returned from a TravelPort GDS.  At the time each itinerary is displayed there will also be a pause as that particular itinerary is priced.</p>

<h3>Outline</h3>

<p>At a high level, the class <a href="https://github.com/iansmith/travelport-uapi-tutorial/blob/master/src/com/travelport/uapi/unit1/Lesson2.java">Lesson2</a> must perform these logical operations:</p>

<ul>
<li>Construct the necessary parameters for an availability search, such the origin and destination city as well as the travel dates</li>
<li>Make the availability search request</li>
<li>Decode the results of the search into proper itineraries</li>

<li><p>Looping over each itinerary</p>

<ul>
<li>Request the price of this itinerary</li>
<li>Display the resulting price</li>

<li><p>Display the segments of the journey</p></li>

<li></li>
</ul></li>
</ul>

</body>
</html>
