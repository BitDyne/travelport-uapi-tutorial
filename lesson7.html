<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Build A Travel App For Facebook</title>
  <meta name="GENERATOR" content="Blackfriday Markdown Processor v1.1" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" type="text/css" href="css/base.css" />
</head>
<body>

<h1>Build A Travel App For Facebook</h1>

<h2>Unit 3, Lesson 7</h2>

<h3>Objective Of Lesson 7</h3>

<p>In unit3 we&rsquo;ll be building a Facebook app that uses the Travelport uAPI to search for travel.  Since it is embedded in Facebook, naturally the travel the application will be searching for is to allow the user to go and visit friends&ndash;such as on their birthday.</p>

<p>With that as the goal that you should keep in the back of your mind, you should be aware that this lesson is neither about Facebook nor Travelport&rsquo;s uAPI!  Facebook&rsquo;s &ldquo;API&rdquo; must be integrated into an application such as the one we are developing with that application running on its own machine and that machine must be on the public internet.  Since most of the readers of this tutorial probably are behind firewalls or do not have the ability to launch new internet-visible, server processes from their work or home machine.</p>

<p>So, we&rsquo;ll address these problems in this lesson: We need to get a Java program running on the public internet that can <em>receive</em> web requests or be a &ldquo;server&rdquo; in internet-speak.  Until this point, we have used Java and WSDL as a <em>client</em> of the Travelport servers that implement the the uAPI.  When completed, Facebook&rsquo;s &ldquo;servers&rdquo; (a sad bit of nomenclature) will be making calls as clients of our server program.  Although our server is running on the internet <em>somewhere</em>, users who interact with our application will &ldquo;see it&rdquo; as being &ldquo;inside&rdquo; Facebook without any &ldquo;seams&rdquo;; our application will have a URL that begins with <code>http://apps.facebook.com</code>, for example.</p>

<h3>The Plan</h3>

<p>Because this lesson has a number of fairly complex moving parts it&rsquo;s important to keep in mind the overall design we have in mind:</p>

<ul>
<li><p>We&rsquo;ll write our code in Java to handle web requests coming from Facebook.  Our responses to these web requests determine, if indirectly, what a Facebook user sees when using the application inside Facebook.</p></li>

<li><p>The (ever-changing) <a href="http://developers.facebook.com">Facebook API</a> is not defined using WSDL like the uAPI.  The Facebook API uses a significantly simpler mechanism called <a href="http://en.wikipedia.org/wiki/REST">REST</a>.  We&rsquo;ll be using the <a href="http://www.playframework.org/">Play Framework</a> to do the heavy-lifting at the Web and REST levels.</p></li>

<li><p>Since Facebook applications need to be on the public internet, we are going to use an internet service called <a href="http://www.heroku.com">Heroku</a> to host our Java application.  Heroku is free when the usage of your application is light, so you should be able to the do the tutorial without incurring any costs.</p></li>

<li><p>Facebook makes use of a protocol called <a href="http://en.wikipedia.org/wiki/OAuth">OAuth</a> to allow the user to control what information our application can receive about said user.  <a href="http://oauth.net/">This protocol</a> depends crucially on cryptography. Thus, we&rsquo;ll need to make use of some of the <a href="http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/CryptoSpec.html">more arcane parts</a> of the Java platform.  These can be ignored by most tutorial readers because these tend to &ldquo;just work or they don&rsquo;t&rdquo;; they are intended to not be &ldquo;debuggable.&rdquo;</p></li>
</ul>

<h3>Notes On Protocols</h3>

<p>For the truly interested in &ldquo;how it works:&rdquo;</p>

<ul>
<li><p>After generating the client code using a WSDL to Java compiler from Apache&rsquo;s CXF project, our uAPI code in lessons 1 to 6 used the <a href="http://en.wikipedia.org/wiki/SOAP">SOAP</a> encoding on top of <a href="http://en.wikipedia.org/wiki/XML">XML</a> being sent over <a href="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a>, the standard protocol for the web.  Since the URLs in use by Travelport are secured using <a href="http://en.wikipedia.org/wiki/HTTPS">HTTPS</a>, eavesdropping is prevented; there is a modicum of security from forgery in that a special header is included at the HTTP-level that includes our Travelport username and password.</p></li>

<li><p>For this lesson and the following two, our code is using <a href="http://en.wikipedia.org/wiki/Play_Framework">Play Framework</a> to interpret requests and responses at the HTTP level (same as above) as needed to interact with Facebook.  REST depends only the HTTP level and is a set of conventions about how to <em>use</em> the HTTP protocol, not a protocol itself.  Play will be responsible for handling the &ldquo;mechanics&rdquo; of the REST/HTTP protocol, but it is our responsibility to implement the &ldquo;semantics&rdquo; of what we want to achieve in Java.  Facebook&rsquo;s use of OAUTH means that the user must give consent before their data is accessed and must be informed what information is to be released to our application.  Further, no other application may &ldquo;impersonate&rdquo; our application and receive data that was intended for our application nor can other parties eavesdrop on our communication as Facebook also communicates with others via HTTPS.</p></li>
</ul>

<p>By way of comparison, both applications use HTTP as the means of transmitting a set of bytes from one point to another and use URLs as the way to identify with whom one wants to communicate.  The uAPI strategy of using WSDL, SOAP, and XML (as well as explicit versioning which we didn&rsquo;t mention before) is much safer than the relatively &ldquo;loose&rdquo; standard of REST which enforces nothing&ndash;it&rsquo;s just a set of conventions.   The advantage of REST is the comparative simplicity and ease of implementation compared to the relatively &ldquo;heavyweight&rdquo; process of using a WSDL-based approach.  Both systems offer reasonable protection from eavesdropping third-parties because they are built on top of HTTPS;  Facebook is probably marginally more secure as it prevents impersonation since it requires that messages be &ldquo;signed&rdquo; in a way that cannot be forged (although the true risk of this certainly very small).</p>

<h3>Play</h3>

<p>The Play Framework is a popular Java f</p>

</body>
</html>
